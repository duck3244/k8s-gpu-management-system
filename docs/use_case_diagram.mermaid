graph TB
    %% 액터 정의
    ADMIN[System Administrator]
    DEV_OPS[DevOps Engineer]
    ML_USER[ML/AI User]
    MONITOR[Monitoring System]
    SCHEDULER[System Scheduler]

    %% GPU 노드 관리 유스케이스
    subgraph "GPU 노드 관리"
        UC1[노드 목록 조회]
        UC2[노드 상세 조회]
        UC3[노드 등록]
        UC4[노드 정보 수정]
        UC5[노드 삭제]
        UC6[노드 상태 변경]
        UC7[클러스터별 노드 조회]
        UC8[노드 검색 및 필터링]
    end

    %% GPU 대시보드 유스케이스
    subgraph "GPU 대시보드"
        UC9[전체 GPU 통계 조회]
        UC10[클러스터별 통계 조회]
        UC11[GPU 모델별 통계 조회]
        UC12[사용량 추이 조회]
        UC13[실시간 성능 메트릭 조회]
        UC14[대시보드 전체 데이터 조회]
    end

    %% GPU 모니터링 유스케이스
    subgraph "GPU 모니터링"
        UC15[GPU 메트릭 수집]
        UC16[성능 데이터 저장]
        UC17[알림 규칙 설정]
        UC18[활성 알림 조회]
        UC19[임계값 모니터링]
        UC20[시스템 상태 확인]
    end

    %% GPU 할당 관리 유스케이스
    subgraph "GPU 할당 관리"
        UC21[GPU 할당 요청]
        UC22[할당 내역 조회]
        UC23[할당 해제]
        UC24[최근 활동 조회]
        UC25[비용 분석]
        UC26[사용량 분석]
    end

    %% 배치 작업 유스케이스
    subgraph "배치 작업"
        UC27[정기 메트릭 수집]
        UC28[GPU 자원 최적화]
        UC29[만료된 할당 정리]
        UC30[통계 데이터 갱신]
        UC31[배치 작업 모니터링]
    end

    %% 시스템 관리 유스케이스
    subgraph "시스템 관리"
        UC32[API 문서 조회]
        UC33[시스템 헬스 체크]
        UC34[로그 조회]
        UC35[메트릭 확인]
        UC36[에러 처리]
        UC37[데이터베이스 관리]
    end

    %% 액터와 유스케이스 연결
    %% System Administrator
    ADMIN --> UC3
    ADMIN --> UC4
    ADMIN --> UC5
    ADMIN --> UC6
    ADMIN --> UC17
    ADMIN --> UC31
    ADMIN --> UC33
    ADMIN --> UC37

    %% DevOps Engineer
    DEV_OPS --> UC1
    DEV_OPS --> UC2
    DEV_OPS --> UC7
    DEV_OPS --> UC8
    DEV_OPS --> UC9
    DEV_OPS --> UC10
    DEV_OPS --> UC11
    DEV_OPS --> UC12
    DEV_OPS --> UC13
    DEV_OPS --> UC14
    DEV_OPS --> UC18
    DEV_OPS --> UC20
    DEV_OPS --> UC22
    DEV_OPS --> UC24
    DEV_OPS --> UC25
    DEV_OPS --> UC26
    DEV_OPS --> UC32
    DEV_OPS --> UC34
    DEV_OPS --> UC35

    %% ML/AI User
    ML_USER --> UC1
    ML_USER --> UC2
    ML_USER --> UC9
    ML_USER --> UC10
    ML_USER --> UC11
    ML_USER --> UC13
    ML_USER --> UC21
    ML_USER --> UC22
    ML_USER --> UC23
    ML_USER --> UC24
    ML_USER --> UC32

    %% Monitoring System
    MONITOR --> UC15
    MONITOR --> UC16
    MONITOR --> UC18
    MONITOR --> UC19
    MONITOR --> UC20
    MONITOR --> UC33
    MONITOR --> UC35

    %% System Scheduler
    SCHEDULER --> UC27
    SCHEDULER --> UC28
    SCHEDULER --> UC29
    SCHEDULER --> UC30

    %% 유스케이스 간 관계 (include, extend)
    UC14 -.-> |include| UC9
    UC14 -.-> |include| UC10
    UC14 -.-> |include| UC11
    UC14 -.-> |include| UC12
    UC14 -.-> |include| UC18
    UC14 -.-> |include| UC24

    UC27 -.-> |include| UC15
    UC27 -.-> |include| UC16

    UC28 -.-> |include| UC29
    UC28 -.-> |include| UC30

    UC8 -.-> |extend| UC1
    UC25 -.-> |extend| UC22
    UC26 -.-> |extend| UC22
    UC36 -.-> |extend| UC33

    %% 스타일링
    classDef actor fill:#e3f2fd,stroke:#1976d2,stroke-width:2px
    classDef usecase fill:#f3e5f5,stroke:#7b1fa2,stroke-width:1px
    classDef system fill:#e8f5e8,stroke:#388e3c,stroke-width:2px

    class ADMIN,DEV_OPS,ML_USER,MONITOR,SCHEDULER actor
    class UC1,UC2,UC3,UC4,UC5,UC6,UC7,UC8,UC9,UC10,UC11,UC12,UC13,UC14,UC15,UC16,UC17,UC18,UC19,UC20,UC21,UC22,UC23,UC24,UC25,UC26,UC27,UC28,UC29,UC30,UC31,UC32,UC33,UC34,UC35,UC36,UC37 usecase